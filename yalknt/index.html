<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./external/style.css">
    <link href="./external/awesome.css" rel="stylesheet">
    <title>Yalkın Tuncay</title>
</head>
<body>
    <div class="top-right-controls">
        <select id="language-selector">
            <option value="tr">Türkçe</option>
            <option value="en">English</option>
            <option value="de">Deutsch</option>
            <option value="fr">Français</option>
        </select>
        <button id="dark-mode-toggle">🌙</button>
    </div>
    
    <div class="sidebar">
        <h2 id="pfp" class="profile-header">Yalkın Tuncay</h2>
        <img id="pfp" width="135" src="./external/pfp.jpeg" alt="Profile Picture">
        <p id="pfp" data-translate="tl-about">Araştırmacı yazar.</p>
        <p id="pfp" class="copyright" data-translate="tl-copyright" style="color:red;">©Telif hakkı saklıdır. Kopyalanamaz veya çoğaltılamaz. (Kitapların Yayın Hakları saklıdır.)</p>
        <p id="pfp" class="email"><a href="mailto:yalknt@gmail.com?subject=Contact">yalknt@gmail.com</a></p>
        <p id="pfp" style="margin-top: -6px;" class="website"><a href="https://www.kitapyurdu.com/yazar/yalkin-tuncay/180461.html">kitapyurdu.com/yalkntuncay</a></p>

        <label style="margin-bottom: -8px;">
            <span data-translate="tl-category">Kitap Kategorisi:</span>
            <select id="category-filter">
                <option data-translate="tl-hepsi" value="">Hepsi</option>
                <option data-translate="tl-giris" value="giris">Giriş</option>
                <option data-translate="tl-kuantum" value="kuantum">Kuantum</option>
                <option data-translate="tl-tasavvuf" value="tasavvuf">Tasavvuf</option>
                <option data-translate="tl-ibniarabi" value="ibniarabi">İbn-i Arabi</option>
                <option data-translate="tl-sifa" value="sifa">Şifa</option>
                <option data-translate="tl-hipnoz" value="hipnoz">Hipnoz</option>
                <option data-translate="tl-astroloji" value="astroloji">Astroloji</option>
                <option data-translate="tl-metafizik" value="metafizik">Metafizik</option>
                <option data-translate="tl-din" value="din">Din</option>
                <option data-translate="tl-zikir" value="zikir">Zikir</option>
                <option data-translate="tl-sozluk" value="sozluk">Sözlük</option>
                <option data-translate="tl-siir" value="siir">Şiir</option>
            </select>
        </label>
        <label style="margin-bottom: -8px;">
            <span data-translate="tl-language">Kitap Dili:</span>
            <select id="language-filter">
                <option data-translate="tl-hepsi" value="">Hepsi</option>
                <option value="TR">Turkish</option>
                <option value="EN">English</option>
                <option value="DE">German</option>
                <option value="FR">French</option>
            </select>
        </label>
        <label style="margin-bottom: -8px;">
            <span data-translate="tl-source-type">Tür (Baskı/E-Kitap):</span>
            <select id="source-filter">
                <option data-translate="tl-hepsi" value="">Hepsi</option>
                <option data-translate="tl-print" value="physicalcopy">Baskı</option>
                <option data-translate="tl-ebook" value="digitalcopy">E-Kitap</option>
            </select>
        </label>
        <label style="margin-bottom: -8px;">
            <span data-translate="tl-reldate">Çıkış Tarihi:</span>
            <select id="year-filter">
                <option data-translate="tl-hepsi" value="">Hepsi</option>
            </select>
        </label>
        <button id="apply-filters" data-translate="tl-apply-filters">Apply Filters</button>
        <div class="social-media" style="margin-top: 20px; text-align: center; display: flex; justify-content: center;">
            <a href="https://www.facebook.com/profile.php?id=61564216347498" target="_blank" style="margin: 0 10px;">
                <button style="color: #3b5998; font-size: 24px; padding: 8px 12px; border-radius: 5px; background-color: rgba(255, 255, 255, 0);">
                    <i class="fab fa-facebook"></i>
                </button>
            </a>
            <a href="https://www.instagram.com/yalkintuncay/" target="_blank" style="margin: 0 10px;">
                <button style="color: #e1306c; font-size: 24px; padding: 8px 12px; border-radius: 5px; background-color: rgba(255, 255, 255, 0);">
                    <i class="fab fa-instagram"></i>
                </button>
            </a>
            <a href="https://x.com/yalkntn" target="_blank" style="margin: 0 10px;">
                <button style="color: #1da1f2; font-size: 24px; padding: 8px 12px; border-radius: 5px; background-color: rgba(255, 255, 255, 0);">
                    <i class="fab fa-twitter"></i>
                </button>
            </a>
        </div>
        
    </div>
    <div class="content">
        <div id="book-list"></div>
    </div>
</body>
</html>

    <script>
document.addEventListener("DOMContentLoaded", () => {
    let selectedLanguage = "tr"; // Default language
    const translationData = {
    "tr": {
    "tl-about": "Araştırmacı yazar.",
    "tl-copyright": "©Telif hakkı saklıdır. Kopyalanamaz veya çoğaltılamaz. (Kitapların Yayın Hakları saklıdır.)",
    "tl-hepsi": "Hepsi",
    "tl-giris": "Giriş",
    "tl-kuantum": "Kuantum",
    "tl-tasavvuf": "Tasavvuf",
    "tl-ibniarabi": "İbn-i Arabi",
    "tl-sifa": "Şifa",
    "tl-hipnoz": "Hipnoz",
    "tl-astroloji": "Astroloji",
    "tl-metafizik": "Metafizik",
    "tl-din": "Din",
    "tl-zikir": "Zikir",
    "tl-sozluk": "Sözlük",
    "tl-siir": "Şiir",
    "tl-read": "Oku",
    "tl-preview": "Önizleme",
    "tl-reldate": "Yayın Yılı",
    "tl-apply-filters": "Filtreleri Uygula",
    "tl-category": "Kitap Kategorisi",
    "tl-language": "Kitap Dili",
    "tl-source-type": "Tür (Baskı/E-Kitap)",
    "tl-reldate": "Çıkış Tarihi",
    "tl-print": "Baskı",
    "tl-ebook": "E-Kitap"
  },
  "en": {
    "tl-about": "Researcher-writer.",
    "tl-copyright": "©Copyright reserved. It cannot be copied or reproduced. (The publishing rights of the books are reserved.)",
    "tl-hepsi": "All",
    "tl-giris": "Introduction",
    "tl-kuantum": "Quantum",
    "tl-tasavvuf": "Sufism",
    "tl-ibniarabi": "Ibn Arabi",
    "tl-sifa": "Healing",
    "tl-hipnoz": "Hypnosis",
    "tl-astroloji": "Astrology",
    "tl-metafizik": "Metaphysics",
    "tl-din": "Religion",
    "tl-zikir": "Remembrance",
    "tl-sozluk": "Dictionary",
    "tl-siir": "Poetry",
    "tl-read": "Read",
    "tl-preview": "Preview",
    "tl-reldate": "Release Year",
    "tl-apply-filters": "Apply Filters",
    "tl-category": "Category",
    "tl-language": "Language",
    "tl-source-type": "Source Type (Print/Digital)",
    "tl-reldate": "Release Date",
    "tl-print": "Print",
    "tl-ebook": "E-Book"
  },
  "fr": {
    "tl-about": "Auteur-chercheur.",
    "tl-copyright": "©Droits d'auteur réservés. Il ne peut pas être copié ou reproduit. (Les droits d'édition des livres sont réservés.)",
    "tl-hepsi": "Tous",
    "tl-giris": "Introduction",
    "tl-kuantum": "Quantique",
    "tl-tasavvuf": "Soufisme",
    "tl-ibniarabi": "Ibn Arabi",
    "tl-sifa": "Guérison",
    "tl-hipnoz": "Hypnose",
    "tl-astroloji": "Astrologie",
    "tl-metafizik": "Métaphysique",
    "tl-din": "Religion",
    "tl-zikir": "Souvenir",
    "tl-sozluk": "Dictionnaire",
    "tl-siir": "Poésie",
    "tl-read": "Lire",
    "tl-preview": "Aperçu",
    "tl-reldate": "Année de publication",
    "tl-apply-filters": "Appliquer les filtres",
    "tl-category": "Catégorie (Catégorie de livre)",
    "tl-language": "Langue (Langue du livre)",
    "tl-source-type": "Type de source (Livre imprimé/numérique)",
    "tl-reldate": "Date de sortie",
    "tl-print": "Imprimé",
    "tl-ebook": "Livre numérique"
  },
  "de": {
    "tl-about": "Forscher-Schriftsteller.",
    "tl-copyright": "©Urheberrechtlich geschützt. Es darf nicht kopiert oder reproduziert werden. (Die Veröffentlichungsrechte der Bücher sind vorbehalten.)",
    "tl-hepsi": "Alle",
    "tl-giris": "Einleitung",
    "tl-kuantum": "Quanten",
    "tl-tasavvuf": "Sufismus",
    "tl-ibniarabi": "Ibn Arabi",
    "tl-sifa": "Heilung",
    "tl-hipnoz": "Hypnose",
    "tl-astroloji": "Astrologie",
    "tl-metafizik": "Metaphysik",
    "tl-din": "Religion",
    "tl-zikir": "Erinnerung",
    "tl-sozluk": "Wörterbuch",
    "tl-siir": "Poesie",
    "tl-read": "Lesen",
    "tl-preview": "Vorschau",
    "tl-reldate": "Erscheinungsjahr",
    "tl-apply-filters": "Filter anwenden",
    "tl-category": "Kategorie (Buchkategorie)",
    "tl-language": "Sprache (Buchsprache)",
    "tl-source-type": "Quellentyp (Druck/Digitalbuch)",
    "tl-reldate": "Erscheinungsdatum",
    "tl-print": "Druck",
    "tl-ebook": "E-Buch"
  }
};

function applyTranslations() {
    const elementsToTranslate = document.querySelectorAll("[data-translate]");
    elementsToTranslate.forEach((element) => {
        const key = element.getAttribute("data-translate");
        const translation = translationData[selectedLanguage]?.[key];
        if (translation) {
            element.textContent = translation;
        } else {
            console.warn(`Translation missing for key: "${key}" in language: "${selectedLanguage}"`);
        }
    });
}


    // Dark mode toggle
    function toggleDarkMode() {
        const isDarkMode = document.body.classList.toggle("dark-mode");
        localStorage.setItem("darkMode", isDarkMode ? "enabled" : "disabled");
        document.getElementById("dark-mode-toggle").textContent = isDarkMode ? "☀️" : "🌙";
    }

    document.getElementById("dark-mode-toggle").addEventListener("click", toggleDarkMode);

    // Preserve dark mode state
    if (localStorage.getItem("darkMode") === "enabled") {
        document.body.classList.add("dark-mode");
        document.getElementById("dark-mode-toggle").textContent = "☀️";
    }

    // Language selector
    const languageSelector = document.getElementById("language-selector");
    languageSelector.addEventListener("change", (event) => {
        selectedLanguage = event.target.value;
        localStorage.setItem("selectedLanguage", selectedLanguage);
        applyTranslations();
        if (metadata.books) {
            renderBooks(metadata.books); // Re-render books when language changes
        }
    });

    // Preserve language selection
    const savedLanguage = localStorage.getItem("selectedLanguage");
    if (savedLanguage) {
        selectedLanguage = savedLanguage;
        languageSelector.value = selectedLanguage;
    }

    // Load book metadata
    fetch("./external/data.json")
        .then((response) => response.json())
        .then((data) => {
            metadata = data; // Save metadata globally
            populateFilters(data.books);
            renderBooks(data.books);
        })
        .catch((error) => console.error("Error loading metadata:", error));

    // Populate filters
    function populateFilters(books) {
        const yearFilter = document.getElementById("year-filter");
        const releaseYears = [...new Set(books.map((book) => book.releasedate))].sort();
        releaseYears.forEach((year) => {
            const option = document.createElement("option");
            option.value = year;
            option.textContent = year;
            yearFilter.appendChild(option);
        });
    }

    function renderBooks(books) {
    const bookList = document.getElementById("book-list");
    bookList.innerHTML = ""; // Clear current book list

    books.forEach((book) => {
        const bookDiv = document.createElement("div");
        bookDiv.className = "book";
        const descriptionKey = `description_${selectedLanguage}`;

        const sources = book.sourcetype
    .map((type) =>
        type === "physicalcopy"
            ? translationData[selectedLanguage]?.["physicalcopy"] || "Print"
            : translationData[selectedLanguage]?.["digitalcopy"] || "E-Book"
    )
    .join(", ");

        bookDiv.innerHTML = `
            <div class="book-header">
                <img src="${book.relativeimagepath}" alt="${book.title}" />
                <div class="book-content">
                    <h2>${book.title}</h2>
                    <p><strong>Categories:</strong> ${
                        book.categories.map(
                            (cat) => translationData[selectedLanguage]?.[cat] || cat
                        ).join(", ")
                    }</p>
                    <p><strong>Languages:</strong> ${
                        book.languages?.join(", ") || book.language
                    }</p>
                    <p><strong>Release Date:</strong> ${book.releasedate}</p>
                    <p><strong>Source Type:</strong> ${sources}</p>
                    <p><strong>Description:</strong> ${
                        book[descriptionKey] || "No description available in this language."
                    }</p>
                    <a class="button" href="${book.buttonlink}">
                        ${translationData[selectedLanguage]?.[book.buttoncontents[0]] || book.buttoncontents[0]}
                    </a>
                </div>
            </div>
        `;
        bookList.appendChild(bookDiv);
    });
}

    // Apply filters
    document.getElementById("apply-filters").addEventListener("click", () => {
        const categoryFilter = document.getElementById("category-filter").value;
        const languageFilter = document.getElementById("language-filter").value;
        const sourceFilter = document.getElementById("source-filter").value;
        const yearFilter = document.getElementById("year-filter").value;

        const filteredBooks = metadata.books.filter((book) => {
            const matchesCategory = !categoryFilter || book.categories.includes(categoryFilter);
            const matchesLanguage = !languageFilter || (book.languages || [book.language]).includes(languageFilter);
            const matchesSource = !sourceFilter || book.sourcetype.includes(sourceFilter);
            const matchesYear = !yearFilter || book.releasedate === yearFilter;

            return matchesCategory && matchesLanguage && matchesSource && matchesYear;
        });

        renderBooks(filteredBooks);
    });
});

    </script>
